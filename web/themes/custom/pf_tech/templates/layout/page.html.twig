{#
/**
 * @file
 * PF Tech's Tailwind-powered page template.
 * 
 * This template uses Tailwind CSS utilities for a clean, modern layout.
 */
#}
{% set sidebar_first_exists = page.sidebar_first|render|striptags('<img><video><audio><drupal-render-placeholder>')|trim is not empty %}
{% set sidebar_second_exists = page.sidebar_second|render|striptags('<img><video><audio><drupal-render-placeholder>')|trim is not empty %}

<div class="min-h-screen flex flex-col bg-gray-50">
  {# Header #}
  <header class="bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50">
    {# Top Bar #}
    {% if page.secondary_menu or page.top_header %}
      <div class="bg-drupal-primary text-white">
        <div class="drupal-container py-2">
          <div class="flex justify-between items-center text-sm">
            {{ page.secondary_menu }}
            {{ page.top_header }}
          </div>
        </div>
      </div>
    {% endif %}
    
    {# Main Header #}
    <div class="drupal-container">
      <div class="flex items-center justify-between py-4">
        {# Logo/Site Name #}
        <div class="flex-shrink-0">
          {{ page.header }}
        </div>
        
        {# Primary Menu - Desktop #}
        <nav class="hidden lg:block">
          {{ page.primary_menu }}
        </nav>
        
        {# Mobile Menu Button #}
        <button class="lg:hidden p-2 rounded-md hover:bg-gray-100" 
                onclick="document.getElementById('mobile-menu').classList.toggle('hidden')">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </div>
      
      {# Mobile Menu #}
      <div id="mobile-menu" class="hidden lg:hidden pb-4">
        {{ page.primary_menu }}
      </div>
    </div>
  </header>

  {# Highlighted Region #}
  {% if page.highlighted %}
    <div class="bg-blue-50 border-b border-blue-200">
      <div class="drupal-container drupal-section">
        {{ page.highlighted }}
      </div>
    </div>
  {% endif %}

  {# Featured Top #}
  {% if page.featured_top %}
    <section class="bg-gradient-to-r from-drupal-primary to-drupal-secondary text-white">
      <div class="drupal-container drupal-section">
        {{ page.featured_top }}
      </div>
    </section>
  {% endif %}

  {# Main Content Area #}
  <main class="flex-grow">
    <div class="drupal-container drupal-section">
      {# Breadcrumb #}
      {% if page.breadcrumb %}
        <nav class="mb-6">
          {{ page.breadcrumb }}
        </nav>
      {% endif %}
      
      {# Content Layout #}
      <div class="flex flex-wrap -mx-4">
        {# Sidebar First #}
        {% if sidebar_first_exists %}
          <aside class="w-full lg:w-1/4 px-4 mb-8 lg:mb-0 order-2 lg:order-1">
            <div class="lg:sticky lg:top-24">
              {{ page.sidebar_first }}
            </div>
          </aside>
        {% endif %}
        
        {# Main Content #}
        <div class="w-full {{ sidebar_first_exists or sidebar_second_exists ? 'lg:w-3/4' : '' }} px-4 order-1 lg:order-2">
          {{ page.content }}
        </div>
        
        {# Sidebar Second #}
        {% if sidebar_second_exists %}
          <aside class="w-full lg:w-1/4 px-4 mt-8 lg:mt-0 order-3">
            {{ page.sidebar_second }}
          </aside>
        {% endif %}
      </div>
    </div>
  </main>

  {# Featured Bottom #}
  {% if page.featured_bottom_first or page.featured_bottom_second or page.featured_bottom_third %}
    <section class="bg-gray-100 border-t border-gray-200">
      <div class="drupal-container drupal-section">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
          {{ page.featured_bottom_first }}
          {{ page.featured_bottom_second }}
          {{ page.featured_bottom_third }}
        </div>
      </div>
    </section>
  {% endif %}

  {# Footer #}
  <footer class="bg-gray-800 text-gray-300">
    {# Footer Columns #}
    {% if page.footer_first or page.footer_second or page.footer_third or page.footer_fourth %}
      <div class="drupal-container py-12">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
          {{ page.footer_first }}
          {{ page.footer_second }}
          {{ page.footer_third }}
          {{ page.footer_fourth }}
        </div>
      </div>
    {% endif %}
    
    {# Footer Bottom #}
    {% if page.footer_fifth %}
      <div class="border-t border-gray-700">
        <div class="drupal-container py-6 text-center text-sm">
          {{ page.footer_fifth }}
        </div>
      </div>
    {% endif %}
  </footer>
</div>

{# Initialize Tailwind styles for Drupal elements #}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Style primary menu links
    document.querySelectorAll('.menu--main a, .nav a').forEach(function(link) {
      link.classList.add('block', 'px-3', 'py-2', 'rounded-md', 'text-base', 'font-medium', 'text-gray-700', 'hover:text-drupal-primary', 'hover:bg-gray-50', 'transition-colors');
    });
    
    // Style breadcrumb
    document.querySelectorAll('.breadcrumb a').forEach(function(link) {
      link.classList.add('text-drupal-primary', 'hover:text-drupal-secondary', 'transition-colors');
    });
    
    // Style messages
    document.querySelectorAll('.messages').forEach(function(message) {
      message.classList.add('mb-4', 'p-4', 'rounded-lg', 'border', 'shadow-sm');
      if (message.classList.contains('messages--status')) {
        message.classList.add('bg-green-50', 'border-green-200', 'text-green-800');
      } else if (message.classList.contains('messages--warning')) {
        message.classList.add('bg-yellow-50', 'border-yellow-200', 'text-yellow-800');
      } else if (message.classList.contains('messages--error')) {
        message.classList.add('bg-red-50', 'border-red-200', 'text-red-800');
      }
    });
    
    // Style buttons
    document.querySelectorAll('.button, input[type="submit"]').forEach(function(button) {
      if (!button.classList.contains('button--')) {
        button.classList.add('drupal-button');
      }
    });
    
    // Style form elements
    document.querySelectorAll('input[type="text"], input[type="email"], input[type="password"], textarea, select').forEach(function(input) {
      input.classList.add('w-full', 'px-3', 'py-2', 'border', 'border-gray-300', 'rounded-md', 'focus:ring-drupal-primary', 'focus:border-drupal-primary', 'focus:outline-none');
    });
    
    // Style tables
    document.querySelectorAll('table').forEach(function(table) {
      table.classList.add('min-w-full', 'divide-y', 'divide-gray-200');
      table.querySelectorAll('th').forEach(function(th) {
        th.classList.add('px-6', 'py-3', 'bg-gray-50', 'text-left', 'text-xs', 'font-medium', 'text-gray-500', 'uppercase', 'tracking-wider');
      });
      table.querySelectorAll('td').forEach(function(td) {
        td.classList.add('px-6', 'py-4', 'whitespace-nowrap', 'text-sm', 'text-gray-900');
      });
    });
  });
</script>